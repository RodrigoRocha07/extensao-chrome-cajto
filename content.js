(function(){"use strict";let observerDOM=null;let campoEncontrado=false;function monitorarPeriodo(){const inputPeriodo=document.querySelector('input[name="period"]');if(inputPeriodo&&!campoEncontrado){console.log("Campo de período encontrado! Valor inicial:",inputPeriodo.value);campoEncontrado=true;let valorAnterior=inputPeriodo.value;const observer=new MutationObserver(function(mutationsList){mutationsList.forEach(function(mutation){if(mutation.type==="attributes"&&mutation.attributeName==="value"){const novoValor=inputPeriodo.value;if(novoValor!==valorAnterior){console.log("Período alterado para:",novoValor);setTimeout(()=>{verificarSeCarregado(novoValor)},1e3);valorAnterior=novoValor}}})});observer.observe(inputPeriodo,{attributes:true,attributeFilter:["value"]});console.log("Observador de mutações ativado para o campo de período.");if(observerDOM){observerDOM.disconnect();console.log("Observador de mudanças no DOM desconectado.")}}else if(!inputPeriodo){console.log("Campo de período não encontrado. Verificando novamente em 2 segundos...");setTimeout(monitorarPeriodo,2e3)}}observerDOM=new MutationObserver(function(){if(!campoEncontrado){monitorarPeriodo()}});observerDOM.observe(document.body,{childList:true,subtree:true});function verificarSeCarregado(periodoAtual){const elementosCarregados=document.querySelectorAll(".css-17jmyh0, .css-cko4fn, .css-10rm7qx, .css-7rssj1");if(elementosCarregados.length>4){console.log("Todos os elementos necessários foram carregados. Aplicando alterações...");aplicarAlteracoesImediatamente(periodoAtual)}else{console.log("Elementos ainda não carregados. Tentando novamente em 500ms...");setTimeout(()=>verificarSeCarregado(periodoAtual),500)}}function carregarValorSalvo(elemento,chaveStorage,periodo,i){const valorSalvo=localStorage.getItem(`${chaveStorage}-${periodo}-${i}`);if(valorSalvo){console.log(`Valor carregado do localStorage para ${chaveStorage}-${periodo}-${i}: ${valorSalvo}`);elemento.innerText=valorSalvo}elemento.setAttribute("data-original-value",elemento.innerText.trim())}function tornarTextoEditavelPorClasse(classeCSS,chaveStorage,periodoAtual){let elementos=document.getElementsByClassName(classeCSS);if(elementos.length===0){console.log(`Nenhum elemento encontrado com a classe ${classeCSS}`);return}for(let i=0;i<elementos.length;i++){const elemento=elementos[i];elemento.setAttribute("contenteditable","true");elemento.style.outline="none";elemento.style.cursor="pointer";if(classeCSS==="css-17jmyh0"){elemento.style.fontSize="28px"}carregarValorSalvo(elemento,chaveStorage,periodoAtual,i);let debounceTimeout;function debounceSalvar(chaveStorage,valor,delay=500){clearTimeout(debounceTimeout);debounceTimeout=setTimeout(()=>{localStorage.setItem(chaveStorage,valor);console.log(`Valor salvo no localStorage para ${chaveStorage}: ${valor}`)},delay)}elemento.addEventListener("blur",function(){const novoValor=elemento.innerText.trim();if(novoValor&&novoValor!==elemento.getAttribute("data-original-value")){debounceSalvar(`${chaveStorage}-${periodoAtual}-${i}`,novoValor);elemento.setAttribute("data-original-value",novoValor)}})}}function aplicarAlteracoesImediatamente(periodoAtual){if(!periodoAtual){periodoAtual="today"}setTimeout(()=>{valores.forEach(item=>{let elementos=document.getElementsByClassName(item.classe);if(elementos.length>0){tornarTextoEditavelPorClasse(item.classe,item.chave,periodoAtual)}})},0)}const valores=[{nome:"Vendas realizadas",texto:"Vendas realizadas",chave:"vendasRealizadas",classe:"css-17jmyh0"},{nome:"Quantidade de vendas",texto:"Quantidade de vendas",chave:"quantidadeVendas",classe:"css-17jmyh0"},{nome:"Reembolso",texto:"Reembolso",chave:"reembolso",classe:"css-cko4fn"},{nome:"Charge Back",texto:"Charge Back",chave:"chargeBack",classe:"css-cko4fn"},{nome:"Abandono C.",texto:"Abandono C.",chave:"abandonoC",classe:"css-cko4fn"},{nome:"Cartão de crédito %",texto:"Cartão de crédito",chave:"cartaoCreditoPercentual",classe:"css-10rm7qx"},{nome:"Pix %",texto:"Pix",chave:"pixPercentual",classe:"css-10rm7qx"},{nome:"Boleto %",texto:"Boleto",chave:"boletoPercentual",classe:"css-10rm7qx"},{nome:"Pic Pay %",texto:"Pic Pay",chave:"picPayPercentual",classe:"css-10rm7qx"},{nome:"Cartão de crédito R$",texto:"Cartão de crédito",chave:"cartaoCreditoMonetario",classe:"css-7rssj1"},{nome:"Pix R$",texto:"Pix",chave:"pixMonetario",classe:"css-7rssj1"},{nome:"Boleto R$",texto:"Boleto",chave:"boletoMonetario",classe:"css-7rssj1"},{nome:"Pic Pay R$",texto:"Pic Pay",chave:"picPayMonetario",classe:"css-7rssj1"}];function aplicarAlteracoesQuandoDisponiveis(){const intervalId=setInterval(()=>{const elementosDisponiveis=verificarElementos();if(elementosDisponiveis){clearInterval(intervalId);aplicarAlteracoesImediatamente()}},500)}function verificarElementos(){let todosEncontrados=true;valores.forEach(item=>{const elementos=document.getElementsByClassName(item.classe);if(elementos.length===0){todosEncontrados=false}});return todosEncontrados}aplicarAlteracoesQuandoDisponiveis();window.addEventListener("load",function(){console.log("Página carregada. Iniciando monitoramento...");setTimeout(monitorarPeriodo,100)});function converterParaNumero(valorStr){let valorNumerico=parseFloat(valorStr.replace(",",".").replace(/[^0-9.]/g,""));if(valorStr.toUpperCase().includes("K")){valorNumerico*=1e3}else if(valorStr.toUpperCase().includes("M")){valorNumerico*=1e6}return valorNumerico}function formatarValor(valor){let valorFormatado;if(valor>=1e6){const valorMilhoes=valor/1e6;valorFormatado=(valorMilhoes%1===0?valorMilhoes.toFixed(0):valorMilhoes.toString().replace(".",","))+"M"}else if(valor>=1e3){const valorMilhares=valor/1e3;valorFormatado=(valorMilhares%1===0?valorMilhares.toFixed(0):valorMilhares.toString().replace(".",","))+"K"}else{valorFormatado=valor.toString().replace(".",",")}return"R$ "+valorFormatado}function atualizarValores(ganho,meta){const valorGanho=document.querySelector("span#ganho");const valorMeta=document.querySelector("span#meta");if(valorGanho&&valorMeta){valorGanho.textContent=formatarValor(ganho);valorMeta.textContent=formatarValor(meta)}const porcentagem=meta>0?Math.min(Math.max(ganho/meta*100,0),100):0;const valorPorcentagem=document.querySelector("p.MuiTypography-root.MuiTypography-body2.css-j1x1ao");if(valorPorcentagem){valorPorcentagem.textContent=`${porcentagem.toFixed(1).replace(".",",")}%`}const barraProgresso=document.querySelector("span.MuiLinearProgress-bar.MuiLinearProgress-barColorPrimary.MuiLinearProgress-bar1Determinate.css-16xzu5m");if(barraProgresso){const translateXValue=-(100-porcentagem);barraProgresso.style.transform=`translateX(${translateXValue}%)`}}function carregarValores(callback){chrome.storage.sync.get(["progressoGanho","progressoMeta"],function(result){const ganho=result.progressoGanho?parseFloat(result.progressoGanho):5e4;const meta=result.progressoMeta?parseFloat(result.progressoMeta):1e5;callback(ganho,meta)})}function salvarValores(ganho,meta){chrome.storage.sync.set({progressoGanho:ganho,progressoMeta:meta})}function tornarValorEditavel(elemento,ganho,meta,isMeta){elemento.setAttribute("contenteditable","true");elemento.style.border="1px dashed #000";elemento.style.cursor="text";elemento.addEventListener("blur",function(){let novoValor=elemento.textContent.trim();let valorConvertido=converterParaNumero(novoValor);if(isMeta){salvarValores(ganho,valorConvertido);atualizarValores(ganho,valorConvertido)}else{salvarValores(valorConvertido,meta);atualizarValores(valorConvertido,meta)}elemento.removeAttribute("contenteditable");elemento.style.border="none"});elemento.focus()}function habilitarEdicaoValores(ganho,meta){const valorGanho=document.querySelector("span#ganho");const valorMeta=document.querySelector("span#meta");valorGanho.addEventListener("click",function(){tornarValorEditavel(valorGanho,ganho,meta,false)});valorMeta.addEventListener("click",function(){tornarValorEditavel(valorMeta,ganho,meta,true)})}carregarValores(function(ganho,meta){const valorGanhoElemento=document.querySelector("p.MuiTypography-root.MuiTypography-body2.css-k6nbjf");if(valorGanhoElemento){valorGanhoElemento.innerHTML=`<span id="ganho">${formatarValor(ganho)}</span> / <span id="meta">${formatarValor(meta)}</span>`}atualizarValores(ganho,meta);habilitarEdicaoValores(ganho,meta)})})();function injectScriptFile(filePath){const script=document.createElement("script");script.src=chrome.runtime.getURL(filePath);script.onload=function(){this.remove()};(document.head||document.documentElement).appendChild(script)}injectScriptFile("inject.js");